{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useAuth}from'../context/AuthContext';import Navbar from'../components/Navbar';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _dashboardData$lowSto;const{user}=useAuth();const[dashboardData,setDashboardData]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get('/api/dashboard',{headers:{Authorization:\"Bearer \".concat(token)}});setDashboardData(response.data);}catch(error){console.error('Error fetching dashboard data:',error);}finally{setLoading(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",user===null||user===void 0?void 0:user.username,\"!\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Medicines\"}),/*#__PURE__*/_jsx(\"p\",{children:(dashboardData===null||dashboardData===void 0?void 0:dashboardData.totalMedicines)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Low Stock\"}),/*#__PURE__*/_jsx(\"p\",{children:(dashboardData===null||dashboardData===void 0?void 0:dashboardData.lowStockCount)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Expired\"}),/*#__PURE__*/_jsx(\"p\",{children:(dashboardData===null||dashboardData===void 0?void 0:dashboardData.expiredCount)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Reminders\"}),/*#__PURE__*/_jsx(\"p\",{children:(dashboardData===null||dashboardData===void 0?void 0:dashboardData.totalReminders)||0})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/add-medicine\",className:\"btn btn-primary\",children:\"Add Medicine\"}),/*#__PURE__*/_jsx(Link,{to:\"/stock-overview\",className:\"btn btn-secondary\",children:\"View Stock\"}),/*#__PURE__*/_jsx(Link,{to:\"/notifications\",className:\"btn btn-info\",children:\"Notifications\"})]}),(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$lowSto=dashboardData.lowStock)===null||_dashboardData$lowSto===void 0?void 0:_dashboardData$lowSto.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"alerts\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Low Stock Alerts\"}),dashboardData.lowStock.map(medicine=>/*#__PURE__*/_jsxs(\"div\",{className:\"alert\",children:[medicine.name,\" - Only \",medicine.stockCount,\" left\"]},medicine._id))]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","useAuth","Navbar","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","_dashboardData$lowSto","user","dashboardData","setDashboardData","loading","setLoading","fetchDashboardData","token","localStorage","getItem","response","get","headers","Authorization","concat","data","error","console","children","className","username","totalMedicines","lowStockCount","expiredCount","totalReminders","to","lowStock","length","map","medicine","name","stockCount","_id"],"sources":["c:/Users/Reshma Banu/medicine_reminder/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport Navbar from '../components/Navbar';\nimport axios from 'axios';\n\nconst Dashboard = () => {\n  const { user } = useAuth();\n  const [dashboardData, setDashboardData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, []);\n\n  const fetchDashboardData = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/dashboard', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setDashboardData(response.data);\n    } catch (error) {\n      console.error('Error fetching dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <Navbar />\n      <div className=\"container\">\n        <h1>Welcome, {user?.username}!</h1>\n        \n        <div className=\"dashboard-stats\">\n          <div className=\"stat-card\">\n            <h3>Total Medicines</h3>\n            <p>{dashboardData?.totalMedicines || 0}</p>\n          </div>\n          <div className=\"stat-card\">\n            <h3>Low Stock</h3>\n            <p>{dashboardData?.lowStockCount || 0}</p>\n          </div>\n          <div className=\"stat-card\">\n            <h3>Expired</h3>\n            <p>{dashboardData?.expiredCount || 0}</p>\n          </div>\n          <div className=\"stat-card\">\n            <h3>Total Reminders</h3>\n            <p>{dashboardData?.totalReminders || 0}</p>\n          </div>\n        </div>\n\n        <div className=\"quick-actions\">\n          <Link to=\"/add-medicine\" className=\"btn btn-primary\">Add Medicine</Link>\n          <Link to=\"/stock-overview\" className=\"btn btn-secondary\">View Stock</Link>\n          <Link to=\"/notifications\" className=\"btn btn-info\">Notifications</Link>\n        </div>\n\n        {dashboardData?.lowStock?.length > 0 && (\n          <div className=\"alerts\">\n            <h3>Low Stock Alerts</h3>\n            {dashboardData.lowStock.map(medicine => (\n              <div key={medicine._id} className=\"alert\">\n                {medicine.name} - Only {medicine.stockCount} left\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}